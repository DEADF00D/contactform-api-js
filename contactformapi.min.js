let RapidAPI_Key=document.currentScript.getAttribute("data-contactformapi-rapidapi-key");function loadCaptcha(t){fetch("https://contact-form4.p.rapidapi.com/captcha",{method:"post",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json","x-rapidapi-host":"contact-form4.p.rapidapi.com","x-rapidapi-key":RapidAPI_Key},body:JSON.stringify({uid:t.getAttribute("data-contactformapi")})}).then(t=>t.json()).then(a=>{if(a.success){var e=t.querySelector("*[data-contactformapi-captcha]");e.querySelector("img").src=`data:image/png;base64,${a.image}`,e.querySelector("input[data-contactformapi-captcha-uid]").setAttribute("data-contactformapi-captcha-uid",a.uid)}}).catch(a=>{var e=getCaptchaElementForm(t);e.parentNode.removeChild(e),formCallError(t,a)})}function getCaptchaElementForm(t){var a,e=t.querySelector("*[data-contactformapi-captcha]");return e?a=e:(a=document.createElement("DIV")).setAttribute("data-contactformapi-captcha","true"),a}function createCaptcha(t){var a=t.querySelector("button[type='submit'], input[type='submit']"),e=getCaptchaElementForm(t);e.style="width:200px; padding:5px; border: 1px solid #ddd; border-radius: 5px;",e.innerHTML='\n        <img src = "#" style="width: 100%; height: auto;" />\n        <input data-contactformapi-captcha-uid = "hello" style="width: calc(100% - 15px);border: 1px solid #ddd;padding: 6px;" placeholder="Type characters" />\n        <span style="color:#f44336; font-size: 12px;" data-contactformapi-error = "true"></span>\n    ',t.querySelector("*[data-contactformapi-captcha]")||a.parentNode.insertBefore(e,a)}function errorCaptcha(t,a){document.querySelector("*[data-contactformapi-captcha] span[data-contactformapi-error]").innerText=a}function formCallSuccess(t,a){var e=t.getAttribute("data-contactformapi-onsuccess");e&&window[e]&&window[e](t,a)}function formCallError(t,a){var e=t.getAttribute("data-contactformapi-onerror");e&&window[e]&&window[e](t,a)}console.log(RapidAPI_Key),window.addEventListener("load",()=>{document.querySelectorAll("form[data-contactformapi]").forEach(t=>{createCaptcha(t),loadCaptcha(t),t.addEventListener("submit",function(a){a.preventDefault();var e=[],r=new FormData(t);for(var c of r.entries())e.push({name:c[0],value:c[1]});var o=document.querySelector("input[data-contactformapi-captcha-uid]");fetch("https://contact-form4.p.rapidapi.com/submit",{method:"post",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json","x-rapidapi-host":"contact-form4.p.rapidapi.com","x-rapidapi-key":RapidAPI_Key},body:JSON.stringify({"captcha-uid":o.getAttribute("data-contactformapi-captcha-uid"),"captcha-response":o.value,fields:e})}).then(t=>t.json()).then(a=>{a.error?("captcha_expired"==a.code?(errorCaptcha(t,"Expired captcha. Please retry."),loadCaptcha(t)):"captcha_wrong"==a.code&&(errorCaptcha(t,"Wrong captcha. Please retry."),loadCaptcha(t)),formCallError(t,a)):a.success&&(errorCaptcha(t,""),formCallSuccess(t,a))}).catch(a=>{formCallError(t,a)}),o.value=""})})});
